{"version":3,"sources":["../.tmp/vat.js"],"names":[],"mappings":"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","file":"vat.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.VAT = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global module */\n\n'use strict'; //jshint ignore:line\n\nmodule.exports = {\n  contains(array, item) {\n    return array.indexOf(item) !== -1;\n  },\n\n  extend(target/*, ...src*/) {\n    const sources = [].slice.call(arguments, 1);\n    sources.forEach((source) => {\n      for (let key in source) {\n        target[key] = source[key];\n      }\n    });\n    return target;\n  },\n\n  isBoolean(val) {\n    return Object.prototype.toString.call(val) === '[object Boolean]';\n  },\n\n  isFunction(val) {\n    return typeof val === 'function';\n  },\n\n  isNumber(val) {\n    return Object.prototype.toString.call(val) === '[object Number]';\n  },\n\n  isString(val) {\n    return Object.prototype.toString.call(val) === '[object String]';\n  },\n\n  isUndefined(val) {\n    return typeof val === 'undefined';\n  },\n\n  union(/*...arrays*/) {\n    let arrays = [].slice.call(arguments, 0);\n\n    let union = [];\n    arrays.forEach((array) => {\n      array.forEach((item) => {\n        if (! module.exports.contains(union, item)) {\n          union.push(item);\n        }\n      });\n    });\n\n    return union;\n  }\n};\n\n},{}],2:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global require, module*/\n\n'use strict'; //jshint ignore:line\n\nconst _ = require('../ourscore');\n\nfunction toValidationError(value) {\n  let err = new TypeError('validation error');\n  err.value = value;\n  return err;\n}\n\nconst any = {\n  _allowed: [],\n  _transforms: [],\n  _valid: [],\n  _validators: [],\n\n  _duplicate(arrayName) {\n    let duplicate = Object.create(this);\n\n    // To help performance, take a copy-on-write approach\n    // to copying over arrays. Only copy the array that is specified\n    // as an input parameter.\n    if (arrayName) {\n      duplicate[arrayName] = [].concat(this[arrayName]);\n    }\n\n    return duplicate;\n  },\n\n  /**\n   * Explicitly allow a value, before any conversion\n   *\n   * @method allow\n   * @param {variant} val\n   */\n  allow(val) {\n    let duplicate = this._duplicate('_allowed');\n    duplicate._allowed.push(val);\n    return duplicate;\n  },\n\n  /**\n   * Export the result as {name} in the results.\n   *\n   * @method as\n   * @param {string} name\n   */\n  as(name) {\n    if (arguments.length === 0) {\n      return this._as;\n    }\n\n    // no need to pass in an array name, none are being updated.\n    let duplicate = this._duplicate();\n    duplicate._as = name;\n    return duplicate;\n  },\n\n  /**\n   * Mark the field as optional. All fields are optional by default.\n   *\n   * @method optional\n   */\n  optional() {\n    return this;\n  },\n\n  /**\n   * Mark the field as required\n   *\n   * @method required\n   */\n  required() {\n    var duplicate = this._duplicate();\n    duplicate._isRequired = true;\n    return duplicate;\n  },\n\n  /**\n   * Remove current transforms\n   *\n   * @method strict\n   */\n  strict() {\n    // no need to pass in `_transforms` since it'll be overwritten anyways\n    let duplicate = this._duplicate();\n    duplicate._transforms = [];\n    return duplicate;\n  },\n\n  /**\n   * Add a validation test function. Function will\n   * be called with value being validated.\n   *\n   * @method test\n   * @param {function} validator\n   */\n  test(validator) {\n    let duplicate = this._duplicate('_validators');\n    duplicate._validators.push(validator);\n    return duplicate;\n  },\n\n  /**\n   * Add a transformer. A transformer is a function that accepts\n   * a value and returns another value. Validation will occur\n   * with returned value.\n   *\n   * @method transform\n   * @param {function} transformer\n   */\n  transform(transformer) {\n    let duplicate = this._duplicate('_transforms');\n    duplicate._transforms.push(transformer);\n    return duplicate;\n  },\n\n  /**\n   * Create an exclusive allowed list of values.\n   *\n   * @method valid\n   * @param {variant} val\n   */\n  valid(val) {\n    let duplicate = this._duplicate('_valid');\n    duplicate._valid.push(val);\n    return duplicate;\n  },\n\n  /**\n   * Validate a value\n   *\n   * @method validate\n   * @param {variant} val\n   * @returns {variant} transformed value. The same as `val` if no\n   * transformations made.\n   * @throws TypeError if validation fails\n   */\n  validate(val) {\n    let origValue = val;\n\n    // Check the exclusive allowed list first. If an exclusive allowed list\n    // is defined and the value is not a member of list, throw\n    // a validation error.\n    if (this._valid.length) {\n      if (_.contains(this._valid, val)) {\n        return val;\n      } else if (! _.isUndefined(val)) {\n        throw toValidationError(origValue);\n      }\n    }\n\n    // Check against the allowed list. If the value is not a member\n    // of the allowed list, continue.\n    if (_.contains(this._allowed, val)) {\n      return val;\n    }\n\n    // Perform any transformations.\n    val = this._transforms.reduce((val, transform) => {\n      return transform(val);\n    }, val);\n\n    // If an undefined value and field is optional, no\n    // further validation is done.\n    if (_.isUndefined(val)) {\n      if (this._isRequired) {\n        throw new ReferenceError('missing value');\n      } else {\n        // If an undefined value and field is optional, no\n        // further validation is done.\n        return val;\n      }\n    }\n\n    // Finally, perform the validations.\n    this._validators.forEach((validator) => {\n      if (! validator(val)) {\n        throw toValidationError(origValue);\n      }\n    });\n\n    return val;\n  }\n};\n\nmodule.exports = () => {\n  return any._duplicate();\n};\n\n\n\n},{\"../ourscore\":1}],3:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global require, module*/\n\n'use strict'; //jshint ignore:line\n\nconst _ = require('../ourscore');\n\nmodule.exports = (createValidator) => {\n  var validator = createValidator();\n\n  return validator.transform((val) => {\n    if (val === 'true') {\n      return true;\n    } if (val === 'false') {\n      return false;\n    }\n\n    return val;\n  })\n  .test((val) => {\n    return _.isBoolean(val) || _.isUndefined(val);\n  });\n};\n\n\n},{\"../ourscore\":1}],4:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global require, module*/\n\n'use strict'; //jshint ignore:line\n\nconst _ = require('../ourscore');\n\nmodule.exports = (createValidator) => {\n  var validator = createValidator();\n\n  return validator.transform((val) => {\n    if (! _.isNumber(val)) {\n      if (/^\\d+$/.test(val)) {\n        return parseInt(val, 10);\n      } else if (/^\\d*\\.\\d*$/.test(val)) {\n        return parseFloat(val);\n      }\n    }\n\n    return val;\n  })\n  .test((val) => {\n    return _.isNumber(val) || _.isUndefined(val);\n  });\n};\n\n\n\n\n},{\"../ourscore\":1}],5:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global require, module*/\n\n'use strict'; //jshint ignore:line\n\nconst _ = require('../ourscore');\n\nconst string = {\n  /**\n   * Specifies the exact string length required\n   *\n   * @method len\n   * @param {number} limit\n   */\n  len(limit) {\n    return this.test((val) => {\n      return val.length === limit;\n    });\n  },\n\n  /**\n   * Specifies the maximum number of characters\n   *\n   * @method max\n   * @param {number} limit\n   */\n  max(limit) {\n    return this.test((val) => {\n      return val.length <= limit;\n    });\n  },\n\n  /**\n   * Specifies the minimum number of characters\n   *\n   * @method min\n   * @param {number} limit\n   */\n  min(limit) {\n    return this.test((val) => {\n      return val.length >= limit;\n    });\n  }\n};\n\nmodule.exports = (createValidator) => {\n  let validator = createValidator();\n  _.extend(validator, string);\n\n  return validator.transform((val) => {\n    // trim strings by default\n    if (_.isString(val)) {\n      return val.trim();\n    }\n\n    return val;\n  }).test((val) => {\n    return _.isString(val) || _.isUndefined(val);\n  });\n};\n\n},{\"../ourscore\":1}],6:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global require, module*/\n\n'use strict'; //jshint ignore:line\n\nconst _ = require('./ourscore');\n\nfunction validate(data, schema) {\n  let error = null;\n  let value = data;\n\n  try {\n    if (_.isUndefined(schema)) {\n      let missingSchemaError = new Error('missing schema');\n      missingSchemaError.value = data;\n      throw missingSchemaError;\n    }\n\n    if (_.isFunction(schema.validate)) {\n      // validate function should return converted values\n      value = schema.validate(data);\n    } else {\n      // use the union to ensure all possible data has\n      // a corresponding schema item and all possible schema\n      // items have been checked.\n      let allKeys = _.union(Object.keys(data), Object.keys(schema));\n      value = {};\n      allKeys.forEach(function (key) {\n        let result = validate(data[key], schema[key]);\n\n        if (result.error) {\n          result.error.key = key;\n          throw result.error;\n        }\n\n        let targetKey = schema[key].as() || key;\n        // only add undefined values iff the value is required\n        if (! _.isUndefined(result.value) || schema[key]._isRequired) {\n          value[targetKey] = result.value;\n        }\n      });\n    }\n  } catch (e) {\n    error = e;\n  }\n\n  return {\n    error,\n    value\n  };\n}\n\n\nmodule.exports = {\n  register,\n  unregister,\n  validate\n};\n\nlet reserved = Object.keys(module.exports);\nlet types = {};\n\nfunction register(typeName, schema) {\n  if (_.contains(reserved, typeName)) {\n    throw new Error(`'${typeName}' is reserved`);\n  }\n\n  if (types[typeName]) {\n    throw new Error(`'${typeName}' is already registered`);\n  }\n\n  module.exports[typeName] = types[typeName] = () => {\n    return schema;\n  };\n}\n\nfunction unregister(typeName) {\n  if (_.contains(reserved, typeName)) {\n    throw new Error(`'${typeName}' is reserved`);\n  }\n\n  if (! types[typeName]) {\n    throw new Error(`'${typeName}' is already not registered`);\n  }\n\n  delete module.exports[typeName];\n  delete types[typeName];\n}\n\n\nconst any = require('./types/any');\n\nregister('any', any());\nregister('boolean', require('./types/boolean')(any));\nregister('number', require('./types/number')(any));\nregister('string', require('./types/string')(any));\n\n\n},{\"./ourscore\":1,\"./types/any\":2,\"./types/boolean\":3,\"./types/number\":4,\"./types/string\":5}]},{},[6])(6)\n});"]}